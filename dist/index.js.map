{"version":3,"file":"index.js","sourceRoot":"","sources":["../index.ts"],"names":[],"mappings":";;AACA,kDAA2D;AAG3D,IAAU,YAAY,CA6CrB;AA7CD,WAAU,YAAY;IAElB,MAAa,WAAW;QAEpB,YAAY,MAAc;YAa1B,yBAAoB,GAAG,CAAC,OAAe,EAAE,MAAc,EAAE,IAAS,EAAE,EAAE;gBAClE,IAAI,OAAO,IAAI,UAAU,EAAE;oBACvB,OAAO,gCAAqB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;iBAC7C;gBACD,IAAI,OAAO,IAAI,WAAW,EAAE;iBAE3B;gBACD,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAA;YAC1D,CAAC,CAAA;YAED,cAAS,GAAG,CAAC,MAAe,EAAE,EAAE;gBAC5B,MAAM,GAAG,GAAQ;oBACb,IAAI,EAAE,MAAM,CAAC,IAAI;oBACjB,EAAE,EAAE,MAAM,CAAC,EAAE;oBACb,OAAO,EAAE,MAAM,CAAC,OAAO;oBACvB,OAAO,EAAE,MAAM,CAAC,OAAO;iBAC1B,CAAA;gBAED,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE;oBACvB,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC;wBAAE,SAAS;;wBAC3C,IAAI,CAAC,oBAAoB,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;iBAChE;YAEL,CAAC,CAAA;YAnCG,IAAI,CAAC,MAAM,GAAG;gBACV,SAAS,EAAE;oBACP,MAAM,EAAE,EAAE;iBACb;gBACD,QAAQ,EAAE;oBACN,MAAM,EAAE,EAAE;iBACb;aACJ,CAAA;YACD,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,CAAC;gBAAE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;;gBACrF,MAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC,CAAA;QACzE,CAAC;KA0BJ;IAvCY,wBAAW,cAuCvB,CAAA;IAED,6BAA6B;AAEjC,CAAC,EA7CS,YAAY,KAAZ,YAAY,QA6CrB","sourcesContent":["import MailchimpService from './mailchimp/mailchimp';\nimport { sendEmailWithSendgrid } from './sendgrid/sendgrid'\nimport { MailDTO } from './sendgrid/mail.dto'\n\nnamespace QuangLibrary {\n\n    export class MailService {\n        config;\n        constructor(config: object) {\n            this.config = {\n                mailchimp: {\n                    apiKey: ''\n                },\n                sendgrid: {\n                    apiKey: ''\n                }\n            }\n            if (Object.values(config).length > 0) this.config = Object.assign({}, this.config, config)\n            else throw new Error('Config file should be an object with services')\n        }\n\n        sendEmailWithService = (service: string, apiKey: string, data: any) => {\n            if (service == 'sendgrid') {\n                return sendEmailWithSendgrid(apiKey, data)\n            }\n            if (service == 'mailchimp') {\n\n            }\n            throw new Error('Mail service currenly not supported')\n        }\n\n        sendEmail = (inputs: MailDTO) => {\n            const msg: any = {\n                from: inputs.from,\n                to: inputs.to,\n                subject: inputs.subject,\n                content: inputs.content\n            }\n\n            for (let i in this.config) {\n                if (this.config[i].apiKey.length == 0) continue;\n                else this.sendEmailWithService(i, this.config[i].apiKey, msg)\n            }\n\n        }\n    }\n\n    // export default MailService\n\n}\n"]}